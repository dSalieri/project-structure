{"version":3,"sources":["webpack:///./src/components/notification/index.js","webpack:///./src/components/sortable-list/index.js","webpack:///./src/utils/escape-html.js","webpack:///./src/components/product-form/index.js","webpack:///./src/pages/products/edit/index.js","webpack:///./src/utils/fetch-json.js"],"names":["NotificationMessage","constructor","message","duration","type","this","createElement","wrapper","document","innerHTML","template","element","firstElementChild","show","target","body","activeMessage","remove","append","timerId","setTimeout","clearTimeout","destroy","SortableList","items","shiftDragging","top","left","posPlaceholder","posDragging","initialIndex","activeIndex","isScrolling","getTranslationDragging","dragging","placeholder","draggingBox","getBoundingClientRect","placeholderBox","draggingElem","documentElement","scrollTop","scrollLeft","placeholderElem","elementDragging","_props","topCondition","belowCondition","clientHeight","offsetHeight","window","scrollBy","requestAnimationFrame","scrollIfCloseToWindowEdge","event","closest","preventDefault","width","tWidth","height","tHeight","tTop","tLeft","clientY","clientX","elementPlaceholder","style","cssText","replaceWith","classList","add","pTop","pLeft","getIndex","addEventListener","onDragMove","onDragEnd","transformValue","position","zIndex","transform","transition","removeEventListener","onTransitionEnd","toggleEvent","CustomEvent","detail","changed","bubbles","dispatchEvent","display","familiarContainer","elementFromPoint","underElement","contains","after","before","removeAttribute","children","findIndex","item","render","sortList","createHTMLElement","forEach","addEventListeners","html","onRemoveItem","onDragStart","string","replace","BACKEND_URL","ProductForm","productId","title","description","quantity","subcategory","status","images","price","discount","save","fileInput","accept","async","file","files","formData","FormData","uploadImage","imageListContainer","subElements","disabled","console","log","result","fetchJson","method","headers","Authorization","getImageItem","data","link","name","click","createCategoriesSelect","defaultFormData","categoriesPromise","loadCategoriesList","productPromise","loadProductData","categoriesData","productResponse","Promise","all","productData","categories","renderForm","setFormData","createImageList","initEventListeners","product","getFormData","JSON","stringify","id","error","productForm","excludedFields","formatToNumber","fields","Object","keys","filter","includes","getValue","field","querySelector","value","values","parseInt","imagesHTMLCollection","querySelectorAll","image","push","url","src","source","alt","getEmptyTemplate","getSubElements","select","category","child","subcategories","Option","outerHTML","map","sortableList","escapeHtml","elements","dataset","onSubmit","Page","match","editableForm","components","renderComponents","component","root","initComponents","reduce","acc","subElement","Notification","params","response","fetch","toString","err","FetchError","ok","errorText","statusText","json","Error","super","reason"],"mappings":"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","file":"products-edit-index-js-4.js","sourcesContent":["export default class NotificationMessage {\r\n  static activeMessage;\r\n  element;\r\n\r\n  constructor(message, { duration = 1000, type = \"success\" } = {}) {\r\n    this.message = message;\r\n    this.duration = duration;\r\n    this.type = type;\r\n    this.createElement();\r\n  }\r\n  get template() {\r\n    return /*html*/ `\r\n      <div class=\"notification notification_${this.type}\" style=\"--value:${\r\n      this.duration / 1000\r\n    }s\">\r\n        <div class=\"notification__content notification__content_show\">\r\n            ${this.message}\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n  createElement() {\r\n    const wrapper = document.createElement(\"div\");\r\n    wrapper.innerHTML = this.template;\r\n    this.element = wrapper.firstElementChild;\r\n  }\r\n  show(target = document.body) {\r\n    if (NotificationMessage.activeMessage)\r\n      NotificationMessage.activeMessage.remove();\r\n\r\n    target.append(this.element);\r\n\r\n    this.timerId = setTimeout(() => {\r\n      this.remove();\r\n    }, this.duration);\r\n\r\n    NotificationMessage.activeMessage = this;\r\n  }\r\n  remove() {\r\n    clearTimeout(this.timerId);\r\n    if (this.element) this.element.remove();\r\n  }\r\n  destroy() {\r\n    this.remove();\r\n    this.element = null;\r\n    NotificationMessage.activeMessage = null;\r\n  }\r\n}\r\n","export default class SortableList {\r\n  element;\r\n  elementPlaceholder;\r\n  elementDragging;\r\n  _props = {\r\n    shiftDragging: {\r\n      top: 0,\r\n      left: 0,\r\n    },\r\n    posPlaceholder: {\r\n      top: 0,\r\n      left: 0,\r\n    },\r\n    posDragging: {\r\n      top: 0,\r\n      left: 0,\r\n    },\r\n    initialIndex: -1,\r\n    activeIndex: -1,\r\n    isScrolling: false,\r\n    getTranslationDragging(dragging, placeholder) {\r\n      const draggingBox = dragging.getBoundingClientRect();\r\n      const placeholderBox = placeholder.getBoundingClientRect();\r\n      const draggingElem = {\r\n        top: document.documentElement.scrollTop + draggingBox.top,\r\n        left: document.documentElement.scrollLeft + draggingBox.left,\r\n      };\r\n      const placeholderElem = {\r\n        top: document.documentElement.scrollTop + placeholderBox.top,\r\n        left: document.documentElement.scrollLeft + placeholderBox.left,\r\n      };\r\n      return `translate(${draggingElem.left - placeholderElem.left}px,${\r\n        draggingElem.top - placeholderElem.top\r\n      }px)`;\r\n    },\r\n  };\r\n\r\n  scrollIfCloseToWindowEdge = () => {\r\n    if (!this.elementDragging) return;\r\n    const { top } = this._props.posDragging;\r\n    const threshold = 15;\r\n    const documentHeight = document.documentElement.clientHeight;\r\n    const draggingHeight = this.elementDragging.offsetHeight;\r\n\r\n    const topCondition = top < threshold;\r\n    const belowCondition = documentHeight < top + draggingHeight + threshold;\r\n    if (topCondition || belowCondition) {\r\n      if (topCondition) window.scrollBy(0, -2);\r\n      if (belowCondition) window.scrollBy(0, 2);\r\n      this._props.isScrolling = true;\r\n      requestAnimationFrame(this.scrollIfCloseToWindowEdge);\r\n    } else if (this._props.isScrolling) {\r\n      this._props.isScrolling = false;\r\n    }\r\n  };\r\n\r\n  onDragStart = (event) => {\r\n    if (this.elementDragging) return;\r\n    if (event.target.closest(\"[data-grab-handle]\")) {\r\n      event.preventDefault();\r\n      const target = event.target.closest(\"li\");\r\n      const {\r\n        width: tWidth,\r\n        height: tHeight,\r\n        top: tTop,\r\n        left: tLeft,\r\n      } = target.getBoundingClientRect();\r\n\r\n      this._props.shiftDragging = {\r\n        top: event.clientY - tTop,\r\n        left: event.clientX - tLeft,\r\n      };\r\n\r\n      /// placeholder element step\r\n      this.elementPlaceholder.style.cssText = `\r\n        width: ${tWidth}px;\r\n        height: ${tHeight}px;\r\n      `;\r\n      this.elementDragging = target;\r\n      target.replaceWith(this.elementPlaceholder);\r\n\r\n      /// draggable element step\r\n      this.elementDragging.classList.add(\"sortable-list__item_dragging\");\r\n      this.elementDragging.style.cssText = `\r\n        user-select: none;\r\n        top: ${tTop}px;\r\n        left: ${tLeft}px;\r\n        width: ${tWidth}px;\r\n        height: ${tHeight}px;\r\n      `;\r\n\r\n      const { top: pTop, left: pLeft } =\r\n        this.elementPlaceholder.getBoundingClientRect();\r\n\r\n      this._props.posPlaceholder = {\r\n        top: pTop,\r\n        left: pLeft,\r\n      };\r\n\r\n      this.element.append(this.elementDragging);\r\n      this._props.initialIndex = this.getIndex();\r\n      this._props.activeIndex = this._props.initialIndex;\r\n      document.addEventListener(\"pointermove\", this.onDragMove);\r\n      document.addEventListener(\"pointerup\", this.onDragEnd);\r\n    }\r\n  };\r\n  onDragEnd = () => {\r\n    const transformValue = this._props.getTranslationDragging(\r\n      this.elementDragging,\r\n      this.elementPlaceholder\r\n    );\r\n\r\n    this.elementDragging.classList.remove(\"sortable-list__item_dragging\");\r\n    this.elementDragging.style.position = \"relative\";\r\n    this.elementDragging.style.zIndex = 10000;\r\n    this.elementDragging.style.top = \"\";\r\n    this.elementDragging.style.left = \"\";\r\n    this.elementDragging.style.transform = transformValue;\r\n    this.elementDragging.style.transition = \"transform 0.3s ease-in-out\";\r\n    this.elementPlaceholder.replaceWith(this.elementDragging);\r\n\r\n    setTimeout(() => {\r\n      this.elementDragging.style.transform = \"\";\r\n      this._props.isScrolling = false;\r\n      this.elementDragging = null;\r\n    }, 0);\r\n\r\n    document.removeEventListener(\"pointermove\", this.onDragMove);\r\n    document.removeEventListener(\"pointerup\", this.onDragEnd);\r\n    this.elementDragging.addEventListener(\r\n      \"transitionend\",\r\n      this.onTransitionEnd\r\n    );\r\n\r\n    const toggleEvent = new CustomEvent(\"toggle-event\", {\r\n      detail: {\r\n        element: this.element,\r\n        changed: this._props.initialIndex !== this._props.activeIndex,\r\n      },\r\n      bubbles: true,\r\n    });\r\n    this.elementDragging.dispatchEvent(toggleEvent);\r\n  };\r\n  onDragMove = (event) => {\r\n    event.preventDefault();\r\n\r\n    this.elementDragging.style.display = \"none\";\r\n\r\n    const familiarContainer =\r\n      document.elementFromPoint(event.clientX, event.clientY) &&\r\n      document\r\n        .elementFromPoint(event.clientX, event.clientY)\r\n        .closest(\".sortable-list\") === this.element;\r\n\r\n    const underElement = document.elementFromPoint(\r\n      event.clientX,\r\n      event.clientY\r\n    );\r\n\r\n    this.elementDragging.style.display = \"\";\r\n\r\n    if (\r\n      familiarContainer &&\r\n      underElement &&\r\n      underElement.classList.contains(\"sortable-list__item\") &&\r\n      this.elementPlaceholder !== underElement\r\n    ) {\r\n      let { top, left } = underElement.getBoundingClientRect();\r\n      this._props.posPlaceholder = { top, left };\r\n      if (\r\n        this.elementPlaceholder.getBoundingClientRect().top - event.clientY <=\r\n        0\r\n      ) {\r\n        underElement.after(this.elementPlaceholder);\r\n      } else {\r\n        underElement.before(this.elementPlaceholder);\r\n      }\r\n      this._props.activeIndex = this.getIndex();\r\n    }\r\n\r\n    this._props.posDragging = {\r\n      top: event.clientY - this._props.shiftDragging.top,\r\n      left: event.clientX - this._props.shiftDragging.left,\r\n    };\r\n\r\n    this.elementDragging.style.left = `${this._props.posDragging.left}px`;\r\n    this.elementDragging.style.top = `${this._props.posDragging.top}px`;\r\n\r\n    if (!this._props.isScrolling) this.scrollIfCloseToWindowEdge();\r\n  };\r\n  onTransitionEnd = (event) => {\r\n    event.target.removeAttribute(\"style\");\r\n    event.target.removeEventListener(\"transitionend\", this.onTransitionEnd);\r\n  };\r\n  onRemoveItem = (event) => {\r\n    if (event.target.closest(\"[data-delete-handle]\")) {\r\n      event.target.closest(\"li\").remove();\r\n    }\r\n  };\r\n\r\n  getIndex = () => {\r\n    return [...this.element.children].findIndex((item) => {\r\n      return item === this.elementPlaceholder;\r\n    });\r\n  };\r\n\r\n  constructor({ items } = {}) {\r\n    this.items = items;\r\n    this.render();\r\n  }\r\n  get template() {\r\n    const sortList = this.createHTMLElement(`<ul class=\"sortable-list\"></ul>`);\r\n    this.items.forEach((item) => {\r\n      item.classList.add(\"sortable-list__item\");\r\n      sortList.append(item);\r\n    });\r\n    return sortList;\r\n  }\r\n  get placeholder() {\r\n    return this.createHTMLElement(\r\n      `<li class=\"sortable-list__placeholder\"></li>`\r\n    );\r\n  }\r\n  render() {\r\n    this.element = this.template;\r\n    this.elementPlaceholder = this.placeholder;\r\n    this.addEventListeners();\r\n  }\r\n  createHTMLElement(html) {\r\n    const wrapper = document.createElement(\"div\");\r\n    wrapper.innerHTML = html;\r\n    return wrapper.firstElementChild;\r\n  }\r\n  addEventListeners() {\r\n    this.element.addEventListener(\"pointerup\", this.onRemoveItem);\r\n    this.element.addEventListener(\"pointerdown\", this.onDragStart);\r\n  }\r\n  remove() {\r\n    if (this.element) this.element.remove();\r\n  }\r\n  destroy() {\r\n    this.remove();\r\n    this.element = null;\r\n    this.elementPlaceholder = null;\r\n    this.elementDragging = null;\r\n    this._props = null;\r\n  }\r\n}\r\n","export default string => string\r\n  .replace(/&/g, '&amp;')\r\n  .replace(/\"/g, '&quot;')\r\n  .replace(/'/g, '&#39;')\r\n  .replace(/</g, '&lt;')\r\n  .replace(/>/g, '&gt;');\r\n","import SortableList from '../sortable-list/index.js';\r\nimport escapeHtml from '../../utils/escape-html.js';\r\nimport fetchJson from '../../utils/fetch-json.js';\r\n\r\nconst IMGUR_CLIENT_ID = '28aaa2e823b03b1';\r\nconst BACKEND_URL = 'https://course-js.javascript.ru';\r\n\r\nexport default class ProductForm {\r\n  element;\r\n  subElements;\r\n  defaultFormData = {\r\n    title: '',\r\n    description: '',\r\n    quantity: 1,\r\n    subcategory: '',\r\n    status: 1,\r\n    images: [],\r\n    price: 100,\r\n    discount: 0\r\n  };\r\n  onSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    this.save();\r\n  };\r\n  /* последний обработчик */\r\n  uploadImage = () => {\r\n    const fileInput = document.createElement('input');\r\n    fileInput.type = 'file';\r\n    fileInput.accept = 'image/*';\r\n\r\n    fileInput.addEventListener('change', async () => {\r\n      const [file] = fileInput.files;\r\n      if (file) {\r\n        const formData = new FormData();\r\n        const { uploadImage, imageListContainer } = this.subElements;\r\n        formData.append('image', file);\r\n\r\n        uploadImage.classList.add('is-loading');\r\n        uploadImage.disabled = true;\r\n\r\n        console.log(IMGUR_CLIENT_ID);\r\n        const result = await fetchJson('https://api.imgur.com/3/image', {\r\n          method: 'POST',\r\n          headers: {\r\n            Authorization: `Client-ID ${IMGUR_CLIENT_ID}`\r\n          },\r\n          body: formData\r\n        });\r\n\r\n        imageListContainer.firstElementChild.append(this.getImageItem(result.data.link, file.name));\r\n\r\n        uploadImage.classList.remove('is-loading');\r\n        uploadImage.disabled = false;\r\n\r\n        fileInput.remove();\r\n      }\r\n    });\r\n\r\n    fileInput.click();\r\n  };\r\n  constructor(productId) {\r\n    this.productId = productId;\r\n  }\r\n\r\n  template() {\r\n    return `\r\n      <div class=\"product-form\">\r\n        <form data-element=\"productForm\" class=\"form-grid\">\r\n          <div class=\"form-group form-group__half_left\">\r\n            <fieldset>\r\n              <label class=\"form-label\">Name</label>\r\n              <input required\r\n                id=\"title\"\r\n                value=\"\"\r\n                type=\"text\"\r\n                name=\"title\"\r\n                class=\"form-control\"\r\n                placeholder=\"Name\">\r\n            </fieldset>\r\n          </div>\r\n          <div class=\"form-group form-group__wide\">\r\n            <label class=\"form-label\">Description</label>\r\n            <textarea required\r\n              id=\"description\"\r\n              class=\"form-control\"\r\n              name=\"description\"\r\n              data-element=\"productDescription\"\r\n              placeholder=\"Description\"></textarea>\r\n          </div>\r\n          <div class=\"form-group form-group__wide\">\r\n            <label class=\"form-label\">Images</label>\r\n            <div data-element=\"imageListContainer\"></div>\r\n            <button data-element=\"uploadImage\" type=\"button\" class=\"button-primary-outline\">\r\n              <span>Upload</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"form-group form-group__half_left\">\r\n            <label class=\"form-label\">Category</label>\r\n              ${this.createCategoriesSelect()}\r\n          </div>\r\n          <div class=\"form-group form-group__half_left form-group__two-col\">\r\n            <fieldset>\r\n              <label class=\"form-label\">Price ($)</label>\r\n              <input required\r\n                id=\"price\"\r\n                value=\"\"\r\n                type=\"number\"\r\n                name=\"price\"\r\n                class=\"form-control\"\r\n                placeholder=\"${this.defaultFormData.price}\">\r\n            </fieldset>\r\n            <fieldset>\r\n              <label class=\"form-label\">Discount ($)</label>\r\n              <input required\r\n                id=\"discount\"\r\n                value=\"\"\r\n                type=\"number\"\r\n                name=\"discount\"\r\n                class=\"form-control\"\r\n                placeholder=\"${this.defaultFormData.discount}\">\r\n            </fieldset>\r\n          </div>\r\n          <div class=\"form-group form-group__part-half\">\r\n            <label class=\"form-label\">Count</label>\r\n            <input required\r\n              id=\"quantity\"\r\n              value=\"\"\r\n              type=\"number\"\r\n              class=\"form-control\"\r\n              name=\"quantity\"\r\n              placeholder=\"${this.defaultFormData.quantity}\">\r\n          </div>\r\n          <div class=\"form-group form-group__part-half\">\r\n            <label class=\"form-label\">Status</label>\r\n            <select id=\"status\" class=\"form-control\" name=\"status\">\r\n              <option value=\"1\">Active</option>\r\n              <option value=\"0\">Inactive</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"form-buttons\">\r\n            <button type=\"submit\" name=\"save\" class=\"button-primary-outline\">\r\n              ${this.productId ? 'Save' : 'Add'} product\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  async render() {\r\n    const categoriesPromise = this.loadCategoriesList();\r\n    const productPromise = this.productId\r\n      ? this.loadProductData(this.productId)\r\n      : [this.defaultFormData];\r\n\r\n    const [categoriesData, productResponse] = await Promise.all([\r\n      categoriesPromise,\r\n      productPromise\r\n    ]);\r\n    const [productData] = productResponse;\r\n\r\n    this.formData = productData;\r\n    this.categories = categoriesData;\r\n\r\n    this.renderForm();\r\n\r\n    if (this.formData) {\r\n      this.setFormData();\r\n      this.createImageList();\r\n      this.initEventListeners();\r\n    }\r\n\r\n    return this.element;\r\n  }\r\n\r\n  async save() {\r\n    const product = this.getFormData();\r\n\r\n    try {\r\n      const result = await fetchJson(`${BACKEND_URL}/api/rest/products`, {\r\n        method: this.productId ? 'PATCH' : 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(product)\r\n      });\r\n\r\n      this.dispatchEvent(result.id);\r\n    } catch (error) {\r\n      console.error('Unknown error', error);\r\n    }\r\n  }\r\n\r\n  getFormData() {\r\n    const { productForm, imageListContainer } = this.subElements;\r\n    const excludedFields = ['images'];\r\n    const formatToNumber = ['price', 'quantity', 'discount', 'status'];\r\n    const fields = Object.keys(this.defaultFormData).filter(item => !excludedFields.includes(item));\r\n    const getValue = field => productForm.querySelector(`[name=${field}]`).value;\r\n    const values = {};\r\n\r\n    for (const field of fields) {\r\n      const value = getValue(field);\r\n      values[field] = formatToNumber.includes(field) ? parseInt(value) : value;\r\n    }\r\n\r\n    const imagesHTMLCollection = imageListContainer.querySelectorAll('.sortable-table__cell-img');\r\n\r\n    values.images = [];\r\n    values.id = this.productId;\r\n\r\n    for (const image of imagesHTMLCollection) {\r\n      values.images.push({\r\n        url: image.src,\r\n        source: image.alt\r\n      });\r\n    }\r\n\r\n    return values;\r\n  }\r\n\r\n  setFormData() {\r\n    const { productForm } = this.subElements;\r\n    const excludedFields = ['images', 'subcategory'];\r\n    const fields = Object.keys(this.defaultFormData).filter(item => !excludedFields.includes(item));\r\n\r\n    fields.forEach(item => {\r\n      const element = productForm.querySelector(`#${item}`);\r\n      element.value = this.formData[item] || this.defaultFormData[item];\r\n    });\r\n  }\r\n\r\n  renderForm() {\r\n    const element = document.createElement('div');\r\n    element.innerHTML = this.formData ? this.template() : this.getEmptyTemplate();\r\n\r\n    this.element = element.firstElementChild;\r\n    this.subElements = this.getSubElements(element);\r\n  }\r\n\r\n  getEmptyTemplate() {\r\n    return `\r\n      <div>\r\n        <h1 class=\"page-title\">Страница не найдена</h1>\r\n        <p>Извините, данный товар не существует</p>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  async loadCategoriesList() {\r\n    return fetchJson(`${BACKEND_URL}/api/rest/categories?_sort=weight&_refs=subcategory`);\r\n  }\r\n\r\n  async loadProductData(productId) {\r\n    return fetchJson(`${BACKEND_URL}/api/rest/products?id=${productId}`);\r\n  }\r\n\r\n  createCategoriesSelect() {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = `<select class=\"form-control\" id=\"subcategory\" name=\"subcategory\"></select>`;\r\n    const select = wrapper.firstElementChild;\r\n    for (const category of this.categories) {\r\n      for (const child of category.subcategories) {\r\n        select.append(new Option(`${category.title} > ${child.title}`, child.id));\r\n      }\r\n    }\r\n    return select.outerHTML;\r\n  }\r\n\r\n  createImageList() {\r\n    const { imageListContainer } = this.subElements;\r\n    const { images } = this.formData;\r\n\r\n    const items = images.map(({ url, source }) => this.getImageItem(url, source));\r\n\r\n    const sortableList = new SortableList({\r\n      items\r\n    });\r\n    imageListContainer.append(sortableList.element);\r\n  }\r\n\r\n  getImageItem(url, name) {\r\n    const wrapper = document.createElement('div');\r\n\r\n    wrapper.innerHTML = `\r\n    <li class=\"products-edit__imagelist-item sortable-list__item\">\r\n      <span>\r\n        <img src=\"icons/icon-grab.svg\" data-grab-handle alt=\"grab\">\r\n        <img class=\"sortable-table__cell-img\" alt=\"${escapeHtml(name)}\" src=\"${escapeHtml(url)}\">\r\n        <span>${escapeHtml(name)}</span>\r\n      </span>\r\n      <button type=\"button\">\r\n        <img src=\"icons/icon-trash.svg\" alt=\"delete\" data-delete-handle>\r\n      </button>\r\n    </li>\r\n    `;\r\n\r\n    return wrapper.firstElementChild;\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const subElements = {};\r\n    const elements = element.querySelectorAll('[data-element]');\r\n\r\n    for (const item of elements) {\r\n      subElements[item.dataset.element] = item;\r\n    }\r\n\r\n    return subElements;\r\n  }\r\n\r\n  dispatchEvent(id) {\r\n    const event = this.productId\r\n      ? new CustomEvent('product-updated', { detail: id, bubbles: true })\r\n      : new CustomEvent('product-saved', { bubbles: true });\r\n\r\n    this.element.dispatchEvent(event);\r\n  }\r\n\r\n  initEventListeners() {\r\n    const { productForm, uploadImage } = this.subElements;\r\n    productForm.addEventListener('submit', this.onSubmit);\r\n    uploadImage.addEventListener('click', this.uploadImage);\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.element = null;\r\n    this.subElements = null;\r\n  }\r\n}\r\n","import ProductForm from '../../../components/product-form/index.js';\r\nimport Notification from '../../../components/notification/index.js';\r\n\r\nexport default class Page {\r\n  element;\r\n  subElements = {};\r\n  components = {};\r\n\r\n  constructor(match) {\r\n    this.match = match;\r\n  }\r\n  async initComponents() {\r\n    const editableForm = new ProductForm(this.match && this.match[1]);\r\n    await editableForm.render();\r\n\r\n    this.components = {\r\n      editableForm\r\n    };\r\n  }\r\n  renderComponents() {\r\n    Object.keys(this.components).forEach(component => {\r\n      const root = this.subElements[component];\r\n      const { element } = this.components[component];\r\n\r\n      if (element) root.append(element);\r\n    });\r\n  }\r\n  get template() {\r\n    return `\r\n      <div class=\"products-edit\">\r\n        <div class=\"content__top-panel\">\r\n          <h1 class=\"page-title\">\r\n            <a href=\"products\" class=\"link\">Products</a> / ${\r\n              this.match && this.match[1] ? 'Edit' : 'Add'\r\n            }\r\n          </h1>\r\n        </div>\r\n        <div data-element=\"editableForm\" class=\"content-box\"></div>\r\n      </div>\r\n    `;\r\n  }\r\n  async render() {\r\n    const element = document.createElement('div');\r\n    element.innerHTML = this.template;\r\n    this.element = element.firstElementChild;\r\n    this.subElements = this.getSubElements(this.element);\r\n\r\n    await this.initComponents();\r\n    this.renderComponents();\r\n    this.initEventListeners();\r\n\r\n    return this.element;\r\n  }\r\n  getSubElements(element) {\r\n    const elements = element.querySelectorAll('[data-element]');\r\n\r\n    return [...elements].reduce((acc, subElement) => {\r\n      acc[subElement.dataset.element] = subElement;\r\n\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  initEventListeners() {\r\n    document.addEventListener('product-updated', () => {\r\n      const notification = new Notification('Changes have been applied successfully', {\r\n        duration: 3000,\r\n        type: 'success'\r\n      });\r\n      notification.show();\r\n    });\r\n    document.addEventListener('product-saved', () => {\r\n      const notification = new Notification('Product has been created successfully', {\r\n        duration: 3000,\r\n        type: 'success'\r\n      });\r\n      notification.show();\r\n    });\r\n  }\r\n\r\n  remove() {\r\n    if (this.element) this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n\r\n    for (const component of Object.values(this.components)) {\r\n      component.destroy();\r\n    }\r\n  }\r\n}\r\n","// same as fetch, but throws FetchError in case of errors\r\n// status >= 400 is an error\r\n// network error / json error are errors\r\nimport Notification from \"../components/notification/index.js\";\r\n\r\nexport default async function (url, params) {\r\n  let response;\r\n\r\n  try {\r\n    // TODO: \"toString\" call needed for correct work of \"jest-fetch-mock\"\r\n    response = await fetch(url.toString(), params);\r\n  } catch (err) {\r\n    throw new FetchError(response, \"Network error has occurred.\");\r\n  }\r\n\r\n  let body;\r\n\r\n  if (!response.ok) {\r\n    let errorText = response.statusText; // Not Found (for 404)\r\n\r\n    try {\r\n      body = await response.json();\r\n\r\n      errorText =\r\n        (body.error && body.error.message) ||\r\n        (body.data && body.data.error && body.data.error.message) ||\r\n        errorText;\r\n    } catch (error) {\r\n      /* ignore failed body */\r\n    }\r\n\r\n    let message = `Error ${response.status}: ${errorText}`;\r\n\r\n    throw new FetchError(response, body, message);\r\n  }\r\n\r\n  try {\r\n    return await response.json();\r\n  } catch (err) {\r\n    throw new FetchError(response, null, err.message);\r\n  }\r\n}\r\n\r\nexport class FetchError extends Error {\r\n  name = \"FetchError\";\r\n\r\n  constructor(response, body, message) {\r\n    super(message);\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n}\r\n\r\n// handle uncaught failed fetch through\r\nwindow.addEventListener(\"unhandledrejection\", (event) => {\r\n  if (event.reason instanceof FetchError) {\r\n    ///alert(event.reason.message);\r\n      const notification = new Notification(event.reason.message, {\r\n        duration: 3000,\r\n        type: 'error'\r\n      });\r\n      notification.show();\r\n  }\r\n});\r\n"],"sourceRoot":""}